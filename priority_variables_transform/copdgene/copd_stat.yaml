priority_variable: 
  name: copd_stat
  raw_variable: phv00159570
    identifiers:
      phs: phs000179
      pht: pht002239
    input_data_type: enum
    value_set:
      value: -1
        function: Add one condition and one MeasurementObservation
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance:
          condition_status: 
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:
        MeasurementObservation:
          range_low:
          range_high:
          age_at_observation:
          category:
          observation_type: #copd gold status
          method_type:
          focus:
          associated_participant:
          associated_visit:
          performed_by:
          value_string:
          value_boolean:
          value_quantity:
          value_enum: GOLDU
          id:
      value: -2
        function: Add one condition and one MeasurementObservation
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance:
          condition_status: 
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:
        MeasurementObservation:
          range_low:
          range_high:
          age_at_observation:
          category:
          observation_type: #copd gold status
          method_type:
          focus:
          associated_participant:
          associated_visit:
          performed_by:
          value_string:
          value_boolean:
          value_quantity:
          value_enum: NON_SMOKER_CONTROL
          id:
      value: 0
        function: Add one condition and one MeasurementObservation
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance:
          condition_status: 
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:
        MeasurementObservation:
          range_low:
          range_high:
          age_at_observation:
          category:
          observation_type: #copd gold status
          method_type:
          focus:
          associated_participant:
          associated_visit:
          performed_by:
          value_string:
          value_boolean:
          value_quantity:
          value_enum: GOLD0
          id:
      value: 1
        function: Add one condition and one MeasurementObservation
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance:
          condition_status: 
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:
        MeasurementObservation:
          range_low:
          range_high:
          age_at_observation:
          category:
          observation_type: #copd gold status
          method_type:
          focus:
          associated_participant:
          associated_visit:
          performed_by:
          value_string:
          value_boolean:
          value_quantity:
          value_enum: GOLD1
          id:
      value: 2
        function: Add one condition and one MeasurementObservation
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance:
          condition_status: 
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:
        MeasurementObservation:
          range_low:
          range_high:
          age_at_observation:
          category:
          observation_type: #copd gold status
          method_type:
          focus:
          associated_participant:
          associated_visit:
          performed_by:
          value_string:
          value_boolean:
          value_quantity:
          value_enum: GOLD2
          id:
      value: 3
        function: Add one condition and one MeasurementObservation
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance:
          condition_status: 
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:
        MeasurementObservation:
          range_low:
          range_high:
          age_at_observation:
          category:
          observation_type: #copd gold status
          method_type:
          focus:
          associated_participant:
          associated_visit:
          performed_by:
          value_string:
          value_boolean:
          value_quantity:
          value_enum: GOLD3
          id:
      value: 4
        function: Add one condition and one MeasurementObservation
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance:
          condition_status: 
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:
        MeasurementObservation:
          range_low:
          range_high:
          age_at_observation:
          category:
          observation_type: #copd gold status
          method_type:
          focus:
          associated_participant:
          associated_visit:
          performed_by:
          value_string:
          value_boolean:
          value_quantity:
          value_enum: GOLD4
          id:
  raw_variable: phv00159731
    identifiers:
      phs: phs000179
      pht: pht002239
    input_data_type: enum
    value_set:
      value: 0
        function: Add one Condition. If COPD condition already present, update condition_status to ABSENT
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance:
          condition_status: ABSENT
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:
      value: 1
        function: Add one Condition for COPD PRESENT if not already there and go to phv00159732
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance:
          condition_status: PRESENT
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:
      value: 3
        function: Add one Condition for COPD if not already present and go to phv00159732
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance:
          condition_status: UNKNOWN
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:
  raw_variable: phv00159732
    identifiers:
      phs: phs000179
      pht: pht002239
    input_data_type: enum
    value_set:
      value: 0
        function: Add provenance and go to phv00159733 - if copd condition doesn't exist, add it with condition_status PRESENT
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance: PATIENT_SELF-REPORTED_CONDITION
          condition_status: #value from phv00159731
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:
      value: 1
        function: Add provenance and go to phv00159733 - if copd condition doesn't exist, add it with condition_status PRESENT
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance: WORKING_DIAGNOSIS
          condition_status: #value from phv00159731
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:
      value: 3
        function: Add one Condition for COPD if not already present and go to phv00159732
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance:
          condition_status: UNKNOWN
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:
  raw_variable: phv00159733
    identifiers:
      phs: phs000179
      pht: pht002239
    input_data_type: integer
    value_set:
      value: 
        function: Transform age from years to days and add to age_at_condition_start and go to phv00159734
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance: #previous value
          condition_status: #value from phv00159731
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:
  raw_variable: phv00159734
    identifiers:
      phs: phs000179
      pht: pht002239
    input_data_type: enum
    value_set:
      value: 0
        function: Add or modify condition_status
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance: #previous value
          condition_status: HISTORICAL #if phv00159731 is 1 or 3
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:
      value: 1
        function: Add or modify condition_status
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance: WORKING_DIAGNOSIS
          condition_status: PRESENT #if phv00159731 is 1 or 3
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:
      value: 3
        function: Add or modify condition_status
        Condition:
          identity:
          condition_concept: MONDO:0005002 #copd
          age_at_condition_start:
          age_at_condition_end:
          condition_provenance:
          condition_status: PRESENT #if phv00159731 is 1 and UNKNOWN if 3
          condition_severity:
          relationship_to_participant: SELF
          associated_participant:
          associated_visit:
          id:

